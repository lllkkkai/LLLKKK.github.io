---
layout: post
category: Architecture
---

## SOLID

SOLID 是以下是原则的缩写：

- S 单一职责原则
- O 开闭原则
- L 里氏替换原则
- I 接口隔离原则
- D 依赖倒置原则

### 单一职责原则

单一功能原则（SRP: Single responsibility principle）：一个 class 应该只做一件事，一个 class 应该只有一个变化的原因

如果一个类有多个职责，这些职责就耦合在了一起。当一个职责发生变化时，可能会影响其它的职责。另外，多个职责耦合在一起会影响复用性。

此原则的核心是解耦和增强内聚性。

**为什么要做到SPR**

类 A 负责两个职责：职责 P1，职责 P2。当由于职责 P1 需求发生改变而需要修改类 A 时，有可能会导致原本运行正常的职责 P2 功能发生故障。

**怎么解决问题**

遵循 SRP。分别建立两个类 A1、A2，使 A1 完成职责 P1，A2 完成职责 P2。这样，当修改类 A1 时，不会影响到职责 A2；同理，当修改 A2 时，也不会影响到职责 P1。

**作用**
- 降低类的复杂度，一个类只负责一项职责，其逻辑肯定要比负责多项职责简单的多。
- 提高类的可读性，提高系统的可维护性。
- 变更引起的风险降低，变更是必然的，如果 SRP 遵守的好，当修改一个功能时，可以显著降低对其他功能的影响。

需要注意的是：只有逻辑足够简单，才可以在 代码级别上 违反 SRP；只有类中方法数量足够少，才可以在 方法级别上 违反 SRP；

很多人对 SRP 不屑一顾，因为它太简单了。但即便是经验丰富的程序员写出的程序，也会有违背这一原则的代码存在。其原因是因为有职责扩散。所谓职责扩散，就是因为某种原因，职责 P 被分化为粒度更细的职责 P1 和 P2。需要注意的是：在职责扩散到我们无法控制的程度之前，要立刻对代码进行重构。